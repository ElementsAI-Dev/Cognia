# Artifacts System Guide

Cognia's Artifacts system enables AI models to create standalone content pieces that can be viewed, edited, and managed independently of the chat conversation. Similar to Claude Artifacts, this system allows for rich, interactive content generation.

## What Are Artifacts?

Artifacts are standalone pieces of content generated by AI that open in a dedicated side panel. They persist across sessions and can be referenced, edited, and versioned.

### Key Benefits

- **Persistent Storage**: Artifacts are saved to localStorage and persist between sessions
- **Version History**: Track changes and restore previous versions
- **Rich Rendering**: Support for code previews, charts, diagrams, and more
- **Interactive Editing**: Edit directly in Monaco editor with AI suggestions
- **Multiple Types**: Support for 8 different artifact types

## Artifact Types

### 1. Code Artifacts

Executable or viewable code snippets with syntax highlighting.

**Supported Languages**:
- JavaScript, TypeScript
- Python, Ruby, PHP
- HTML, CSS, SCSS
- JSX, TSX (React)
- SQL, Bash, Shell
- JSON, YAML, XML
- And 17+ more

**Features**:
- Syntax highlighting with Shiki
- Line numbers
- Copy to clipboard
- Full-screen mode
- Download as file

**Example Use Cases**:
- API endpoints
- Data processing scripts
- Configuration files
- Utility functions

### 2. Document Artifacts

Markdown documents with rich formatting support.

**Features**:
- Markdown rendering
- Table of contents
- Code blocks
- Inline math (LaTeX)
- Mermaid diagrams
- Export to PDF/Word

**Example Use Cases**:
- Technical documentation
- Articles and blog posts
- Reports and summaries
- Study guides

### 3. SVG Artifacts

Scalable vector graphics that render interactively.

**Features**:
- Direct SVG rendering
- Zoom and pan
- Copy SVG code
- Download as .svg file
- Embed in HTML

**Example Use Cases**:
- Icons and logos
- Diagrams and charts
- Illustrations
- Infographics

### 4. HTML Artifacts

Full HTML pages with CSS and JavaScript.

**Features**:
- Live preview in iframe
- Responsive design
- Interactive elements
- Copy HTML source
- Open in new tab

**Example Use Cases**:
- Landing pages
- Email templates
- Web components
- Interactive demos

### 5. React Artifacts

React components with live preview.

**Features**:
- JSX/TSX syntax highlighting
- Live component preview
- Props interface display
- Copy component code
- Download as file

**Example Use Cases**:
- UI components
- Page layouts
- Interactive widgets
- Component libraries

### 6. Mermaid Artifacts

Mermaid diagram definitions with visual rendering.

**Supported Diagram Types**:
- Flowcharts
- Sequence diagrams
- Class diagrams
- State diagrams
- ER diagrams
- Gantt charts
- Pie charts
- Mind maps

**Features**:
- Live diagram rendering
- Edit diagram code
- Export as SVG/PNG
- Multiple themes

**Example Use Cases**:
- Process flows
- System architecture
- API sequences
- Database schemas

### 7. Chart Artifacts

Data visualizations using Vega-Lite or custom chart configs.

**Chart Types**:
- Line charts
- Bar charts
- Pie charts
- Area charts
- Scatter plots
- Radar charts

**Features**:
- Interactive charts
- Data tooltips
- Export as PNG
- Theme customization

**Example Use Cases**:
- Data analysis
- Statistics visualization
- Performance metrics
- Financial reports

### 8. Math Artifacts

LaTeX mathematical expressions with rendering.

**Features**:
- LaTeX syntax
- Equation rendering
- Copy as LaTeX
- Copy as image
- MathJax/KaTeX support

**Example Use Cases**:
- Mathematical proofs
- Scientific formulas
- Statistical equations
- Physics expressions

## Creating Artifacts

### Automatic Creation

AI models automatically create artifacts when they generate code, documents, or other standalone content.

**Trigger Phrases**:
- "Create a React component for..."
- "Generate a Python script that..."
- "Write a document about..."
- "Build a dashboard showing..."
- "Design an SVG icon of..."

**Example Prompts**:

```
Create a React todo list component with add, delete, and toggle functionality.
```

```
Generate a Python script to scrape weather data from a website.
```

```
Write a comprehensive guide to using TypeScript with React.
```

### Manual Creation

Users can also create artifacts manually:

1. Open the side panel (Canvas/Artifacts button in header)
2. Select **Artifacts** tab
3. Click **Create Artifact**
4. Choose type, title, and content
5. Click **Save**

## Canvas Editor

The Canvas editor provides a full-featured editing experience based on Monaco editor (VS Code's editor).

### Features

**Code Editing**:
- Syntax highlighting for 30+ languages
- Auto-indentation
- Bracket matching
- Multi-cursor editing
- Find and replace
- Keyboard shortcuts

**AI Suggestions**:
- Inline code suggestions
- Error detection and fixes
- Code improvements
- Refactoring recommendations
- Documentation generation

**Version History**:
- Automatic version saves
- Manual version checkpoints
- Version comparison
- Restore previous versions
- Change descriptions

### Canvas Actions

Quick actions available from the Canvas toolbar:

- **Review**: AI reviews code for issues
- **Fix**: Automatically fix detected problems
- **Explain**: Get AI explanation of selected code
- **Improve**: Enhance code quality
- **Translate**: Convert to another language
- **Simplify**: Make code more readable
- **Expand**: Add more functionality
- **Format**: Beautify code
- **Run**: Execute code (Python)

### Keyboard Shortcuts

Canvas editor supports VS Code-style shortcuts:

| Action | Windows/Linux | macOS |
|--------|---------------|-------|
| Save | Ctrl+S | Cmd+S |
| Find | Ctrl+F | Cmd+F |
| Replace | Ctrl+H | Cmd+H |
| Format | Shift+Alt+F | Shift+Option+F |
| Toggle Comment | Ctrl+/ | Cmd+/ |
| Go to Line | Ctrl+G | Cmd+G |
| Multi-cursor | Alt+Click | Option+Click |

## AI Suggestions System

The Canvas editor integrates AI suggestions for enhanced productivity.

### How It Works

1. AI analyzes your code as you type
2. Suggestions appear as inline diffs
3. Accept or reject each suggestion
4. AI explains reasoning for changes

### Suggestion Types

**Fix Suggestions**:
- Bug fixes
- Error corrections
- Syntax fixes
- Type corrections

**Improve Suggestions**:
- Performance optimizations
- Best practices
- Code clarity
- Maintainability

**Refactor Suggestions**:
- Extract functions
- Simplify logic
- Reduce duplication
- Better naming

**Documentation Suggestions**:
- Add JSDoc comments
- Function descriptions
- Parameter documentation
- Usage examples

### Managing Suggestions

- **View Suggestions**: Click suggestion indicator in gutter
- **Accept Suggestion**: Click "Accept" or press Tab
- **Reject Suggestion**: Click "Reject" or press Esc
- **Apply All**: Apply all pending suggestions
- **Dismiss All**: Clear all suggestions

## Version History

Every canvas document and artifact maintains a complete version history.

### Automatic Saves

- **Auto-save**: Every 30 seconds
- **On change**: After significant edits
- **On blur**: When switching away from panel
- **Manual**: Ctrl/Cmd+S

### Creating Versions

Create manual version checkpoints:

1. Click **Version History** button in Canvas toolbar
2. Click **Create Version**
3. Add description (optional)
4. Click **Save Version**

### Restoring Versions

1. Open **Version History** panel
2. Select version to restore
3. Click **Restore Version**
4. Confirm restoration
5. Current state is saved as new version

### Version Comparison

Compare any two versions:

1. Open **Version History** panel
2. Select two versions (Ctrl/Cmd+click)
3. Click **Compare**
4. View side-by-side diff
5. Copy changes if needed

## Artifact Management

### Viewing Artifacts

1. Click side panel button in header
2. Select **Artifacts** tab
3. Browse artifacts by session
4. Click artifact to view

### Artifact Metadata

Each artifact stores:

```typescript
{
  id: string;              // Unique identifier
  sessionId: string;       // Parent conversation
  messageId: string;       // Source message
  type: ArtifactType;      // code, document, svg, etc.
  title: string;           // Display title
  content: string;         // Artifact content
  language?: string;       // For code artifacts
  version: number;         // Version number
  createdAt: Date;         // Creation timestamp
  updatedAt: Date;         // Last update
  metadata?: {
    runnable?: boolean;    // Can be executed
    previewable?: boolean; // Can be previewed
    dependencies?: string[]; // Required packages
    wordCount?: number;    // For documents
  }
}
```

### Editing Artifacts

1. Open artifact from side panel
2. Click **Edit in Canvas**
3. Make changes in Monaco editor
4. AI suggestions appear automatically
5. Save when done (new version created)

### Deleting Artifacts

1. Open **Artifacts** tab in side panel
2. Find artifact to delete
3. Click delete icon
4. Confirm deletion
5. Artifact is permanently removed

## Code Transformations

The Canvas editor supports powerful code transformations powered by AI.

### Available Transformations

**Language Translation**:
- Convert JavaScript to TypeScript
- Python to JavaScript
- SQL to ORM query
- CSS to SCSS

**Framework Migration**:
- React to Vue component
- Vanilla JS to React
- Express to FastAPI

**Code Style**:
- Convert to async/await
- Add type annotations
- Convert to functional components
- Apply Prettier formatting

**Optimization**:
- Improve performance
- Reduce bundle size
- Memory optimization
- Algorithm efficiency

### Applying Transformations

1. Open code in Canvas editor
2. Select code to transform (or skip for all)
3. Click **Actions** menu
4. Select transformation
5. Review changes in diff view
6. Accept or reject

## Integration with Chat

### Referencing Artifacts

Artifacts are automatically linked to their source messages:

- Chat messages show artifact indicators
- Click indicator to open artifact
- Artifact panel shows related messages

### Artifact Context

AI can reference existing artifacts:

```
"Update the todo list component you created earlier to add categories."
```

```
"Explain the Python script from the previous message."
```

```
"Refactor the dashboard component for better performance."
```

### Multi-Artifact Workflows

Create complex projects with multiple artifacts:

```
Create a React app with:
1. A navigation component
2. A dashboard component
3. A chart component using the data from this CSV
4. A settings page
```

AI generates separate artifacts for each component, all linked in the conversation.

## Export and Sharing

### Download Artifacts

Download artifacts as files:

1. Open artifact in Canvas/Artifacts panel
2. Click **Download** button
3. File downloads with appropriate extension

Supported formats:
- Code: .js, .py, .ts, etc.
- Documents: .md, .pdf, .docx
- SVG: .svg
- HTML: .html
- Charts: .png

### Copy to Clipboard

Quick copy artifact content:

1. Open artifact
2. Click **Copy** button
3. Content copied to clipboard

### Share Artifacts

Share artifacts via:
- **Export**: Download and share file
- **Screenshot**: Take screenshot of preview
- **Code Link**: Copy artifact code directly

## Best Practices

### For Code Artifacts

1. **Use Descriptive Titles**: Help organize and find artifacts later
2. **Add Comments**: Document complex logic
3. **Version Control**: Create versions before major changes
4. **Test Code**: Use Run feature (Python) or external testing
5. **Review AI Suggestions**: Don't blindly accept all changes

### For Document Artifacts

1. **Structure with Headings**: Use proper Markdown hierarchy
2. **Add Tables of Contents**: For long documents
3. **Include Code Blocks**: With syntax highlighting
4. **Link Sections**: Use Markdown links
5. **Preview Before Export**: Ensure formatting looks good

### For Diagram Artifacts

1. **Start Simple**: Build complex diagrams incrementally
2. **Use Consistent Styling**: Apply uniform colors and fonts
3. **Label Everything**: Clear labels improve understanding
4. **Test Rendering**: Ensure diagram renders correctly
5. **Export as SVG**: For scalability

## Tips and Tricks

### Keyboard Navigation

- **Ctrl/Cmd+P**: Quick open artifacts
- **Ctrl/Cmd+B**: Toggle side panel
- **Ctrl/Cmd+Shift+P**: Command palette
- **F11**: Toggle full-screen mode

### Quick Actions

- **Double-click word**: Select word
- **Triple-click line**: Select line
- **Alt+drag**: Column selection
- **Ctrl/Cmd+D**: Select next occurrence

### AI Prompting

**For Better Artifacts**:
```
Create a React component for a user profile card with:
- Avatar image
- Name and title
- Bio section
- Social media links
- Edit button
Use TypeScript and Tailwind CSS. Include props interface.
```

**For Complex Artifacts**:
```
Create a complete dashboard application with:
1. Sidebar navigation
2. Header with user menu
3. Main content area with charts
4. Data table with filters
5. Responsive design
```

## Troubleshooting

### Artifact Not Showing

1. Check side panel is open
2. Ensure correct tab (Artifacts vs Canvas)
3. Look for artifact indicator in chat
4. Try refreshing the page

### Canvas Editor Issues

- **Syntax Highlighting Not Working**: Verify language is selected
- **Auto-format Not Working**: Check formatter is enabled in settings
- **Suggestions Not Appearing**: Ensure AI provider is configured
- **Can't Save**: Check localStorage quota

### Version History Problems

- **Missing Versions**: Check auto-save is enabled
- **Can't Restore**: Verify version exists
- **Large History**: Old versions auto-delete after limit

### Performance Issues

- **Large Files**: Consider splitting into smaller artifacts
- **Slow Rendering**: Disable syntax highlighting for large files
- **Memory Issues**: Close unused artifacts
- **Browser Crash**: Reduce content size or use desktop app

## Advanced Usage

### Custom Artifact Types

Developers can extend artifact system with custom types:

1. Define artifact type in `types/artifact.ts`
2. Create renderer component
3. Register in artifact viewer
4. Add preview template

### API Integration

Artifacts can be created programmatically:

```typescript
import { useArtifactStore } from '@/stores';

const createArtifact = useArtifactStore.getState().createArtifact;

createArtifact({
  sessionId: 'session-123',
  messageId: 'msg-456',
  type: 'code',
  title: 'Data Processor',
  content: '// Your code here',
  language: 'typescript'
});
```

### Webhook Integration

Set up webhooks to notify external systems when artifacts are created/updated (enterprise feature).

## Security Considerations

- **Code Execution**: Only enable for trusted code
- **File Access**: Canvas runs in browser sandbox
- **API Keys**: Never include in artifacts
- **Sensitive Data**: Avoid storing secrets
- **Public Sharing**: Review artifacts before sharing

## Future Enhancements

Planned features:

- Collaborative editing
- Artifact templates
- Advanced diff viewer
- Artifact marketplace
- Git integration
- Deployment integrations (Vercel, Netlify)
- Custom renderers
- Artifact testing framework
